{% docs src_cloud_postgres %}
**Status:** Active

## Overview

dbt Cloud runs with a Postgres (aka PostgreSQL) database powering the application. This is where we store all the information about Accounts, Users, Jobs, Runs, and all other key components of the application. Currently we have two different deployments of dbt Cloud:
- Multi-Tenant (Default) - This is the main deployment where different companies log into the same dbt Cloud app and access is managed by user login credentials.
- Single-Tenant - This is a deployment where the company has their own, isolated, version of dbt Cloud. The app is not aware of other deployments of dbt Cloud, so the IDs will start from 1 and it operates exactly like the multi-tenant deployment. The only difference here is that the only company able to access this is the enterprise company that purchased this deployment type.

Knowing that these two deployment options exist is critical in understanding how our staging data is put together. Regardless of the deployment type, all of these databases are synced via Fivetran. The infrastructure engineering team helps us get access to new single-tenant deployments, but the data team is responsible for updating the tables in Fivetran that must be synced.
## Staging Tables

Each deployment of cloud will have its own Postgres database and all deployments have the exact same database structure. This is why the data team found it ideal to union all tables at the staging layer. Doing this allows us to apply the same transformations across the different deployment types only once and reduces the maintenance burden since all single-tenant deployments are combined with the single-tenant database objects. This is also the stage where IDs are handled. Because IDs are non-unique across the different deployment types, it is important that we have some way to hash IDs to guarantee that they remain unique and prevent unexpected data collision or blending, which would lead to incorrect data and downstream reporting.

A detailed explanation of how we handle this process can be found in our [Single-Tenant Implementation](https://www.notion.so/dbtlabs/Single-Tenant-Implementation-bc741c016b914624b0973bd5f079ebce) doc.

## Key Objects

Most of the analytics for dbt Cloud usage, activity, or statuses originates from these Postgres tables. If there's a critical function, feature, or aspect of dbt Cloud, you are likely to find its corresponding table here. These are the key objects that you will find here (and supporting models will often have be prepended by the same key object name):
- accounts
- connections
- dbt_adapters
- develop_requests (aka. IDE sessions)
- email_verifications
- environments
- groups
- jobs
- projects
- repos
- runs
- users

You can view how all these objects relate to each other in this comprehensive ERD that was generated by the platform team:
![dbt Cloud ERD](assets/dbt-cloud-erd.png)

Note that we do not currently model all these objects because many of the tables are responsible for dbt Cloud feature functionality, but do not contribute to any analytics. If there is something that you would like to be added to the current modeling, feel free to start the PR and/or reach out to the data team for any help needed!

{% enddocs %}