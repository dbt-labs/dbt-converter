
version: 2

sources:
  - name: salesforce
    description: '{{ doc("src_salesforce") }}'
    loader: stitch
    loaded_at_field: _sdc_batched_at
    database: raw

    freshness:
      warn_after: {count: 4, period: hour}
      error_after: {count: 8, period: hour}

    meta:
      team: ['Revenue']
      owner_name: Elize Papineau

    tables:
      - name: account

      - name: account_history
        identifier: accounthistory
        tests:
          # If this fails, we will experience column-name collision in the staging model
          - unique_combination_of_column_values:
              group_by: field
              count_by: datatype
              config:
                where: datatype != 'EntityId'

      - name: campaign

      - name: campaignmember

      - name: clearbit
        identifier: cbit__clearbit__c

      - name: contact

      - name: credential
        identifier: credential__c

      - name: credit_note
        identifier: blng__CreditNote__c

      - name: credit_note_item
        identifier: blng__CreditNoteLine__c

      - name: domain
        identifier: domain__c

      - name: dbt_cloud_account
        identifier: dbt_cloud_account__c

      - name: dbt_cloud_user
        identifier: dbt_cloud_user__c

      - name: event

      - name: finance_period
        identifier: blng__FinancePeriod__c

      - name: forecasts
        identifier: forecast__c

      - name: goals
        identifier: goal__c

      - name: gong_call
        identifier: gong__gong_call__c

      - name: invoices
        identifier: blng__invoice__c

      - name: invoice_lines
        identifier: blng__invoiceline__c

      - name: months
        identifier: month__c

      - name: opportunity

      - name: opportunity_contact_roles
        identifier: opportunitycontactrole

      - name: opportunitylineitem

      - name: opportunity_forecast
        identifier: opportunity_forecast__c

      - name: opportunity_history
        identifier: opportunityhistory

      - name: opportunity_stage
        identifier: opportunitystage

      - name: orders
        identifier: ORDER
        quoting:
          identifier: true

      - name: order_items
        identifier: orderitem

      - name: partner_influences
        identifier: partner_influence__c

      - name: partners
        identifier: partner__c

      - name: products
        identifier: product2

      - name: quarters
        identifier: quarter__c

      - name: quotes
        identifier: sbqq__quote__c

      - name: rep_quota_periods
        identifier: rep_commission_period__c

      - name: revenue_distribution_method
        identifier: blng__RevenueDistributionMethod__c

      - name: revenue_schedule
        identifier: blng__RevenueSchedule__c

      - name: revenue_recognition_treatment
        identifier: blng__RevenueRecognitionTreatment__c

      - name: revenue_transaction
        identifier: blng__RevenueTransaction__c

      - name: user

      - name: task

      - name: territory
        identifier: territory__c
        freshness: null

      - name: territory_zipcode
        identifier: Territory_Zip_Postal_Code__c
      
      - name: territory_state
        identifier: Territory_State_Province__c
      
      - name: territory_country
        identifier: Territory_Country__c
      
      - name: touchpoints
        identifier: lead__c

      - name: job_requisitions
        identifier: job_requisition__c
      
      - name: crossbeam_overlap
        identifier: xbeamprod__Crossbeam_Overlap__c