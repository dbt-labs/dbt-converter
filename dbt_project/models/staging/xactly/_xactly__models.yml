version: 2

models:
  - name: stg_xactly__credits
    description: >
      Salesforce Opportunity ID - level attribution of bookings to salesperson.
      At this point in the DAG, this data has several caveats that are
      accounted for in downstream models, among which is that team members may
      get multiple credits for the same opportunity due to activity such as movement
      from Single Tenant to Multi Tenant.
    columns:
      - name: salesforce_opportunity_id
        description: >
          The associated Salesforce Opportunity ID or the attribution of sales
          credits that is happening outside of Salesforce. For example, if a SD
          is on parental leave, someone else may receive credits for the
          booking. If the value begins with `Trigger`, it is an aggregation of
          all the salesperson's opportunities for a fiscal half and cannot be
          broken down to the opportunity-level.
      - name: is_sfdc_credit
        description: >
          Boolean field indicating if the credit corresponds to Salesforce
          Opportunity owners or is an override due to special circumstances, as
          documented in `salesforce_opportunity_id` description. 
      - name: is_oppotunity_level_credit
        description: >
          Boolean field indicating if the credit is at the Salesforce
          Opportunity grain, or aggregated.
  - name: stg_xactly__quarterly_quotas
    description: >
      Quotas set at the quarterly grain. A sales person may have up to two
      quotas per quarter. For instance, a new rep would have their normal quota
      which is used to calculate their commission rate and their ramp quota.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - salesforce_user_id
            - name
            - period_started_at