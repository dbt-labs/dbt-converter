version: 2

metrics:
  - name: arr_churn_self_serve
    label: Self-Serve Total Churn ARR
    description: >
      The sum of Downsell and Cancelled ARR (Annual Recurring Revenue) for Self-Serve customers 
      over a given time period. Includes ARR moving from Self-Serve to Managed as a negative value.

    calculation_method: derived
    expression: "{{metric('arr_downsell_self_serve')}} + {{metric('arr_cancelled_self_serve')}} + {{metric('arr_enterprise_upgrade_self_serve')}}"

    dimensions:
      - fiscal_quarter
      - fiscal_year

    timestamp: close_month
    time_grains: [month, quarter, year, all_time]

    meta:
      metric_level: 'Company'
      owner(s): 'Paige Berry'
      