version: 2

metrics:
  - name: arr_enterprise_upgrade_self_serve
    label: Self Serve Enterprise Upgrade (S2M) ARR
    model: ref('fct_arr_aggregated')
    description: >
      For a customer that upgrades from Self-Serve to Managed, 
      the value of the Self-Serve contract when the Managed Deal closes 
      (i.e. the amount of Self-Serve ARR (Annual Recurring Revenue) moving to Managed) 
      for a given time period. Will be a negative value as this ARR is moving out of Self-Serve bucket.

    calculation_method: sum
    expression: ent_upgrade_ss_arr

    filters:
      - field: sales_channel
        operator: "="
        value: "'Self-Serve'"

    dimensions:
      - fiscal_quarter
      - fiscal_year

    timestamp: close_month
    time_grains: [month, quarter, year, all_time]

    meta:
      metric_level: 'Company'
      owner(s): 'Paige Berry'
      