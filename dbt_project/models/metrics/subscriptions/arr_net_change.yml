version: 2

metrics:
  - name: arr_net_change
    label: Net Change in ARR (Cloud)
    description: >
      The sum total of new, upgrade, and reactivated ARR,
      less downgrades and churned ARR.
    tags: []

    calculation_method: derived
    expression: "coalesce( {{metric('arr_new')}}, 0) + coalesce( {{metric('arr_upgrade')}}, 0) + coalesce( {{metric('arr_reactivation')}}, 0) + coalesce( {{metric('arr_downgrade')}}, 0) + coalesce( {{metric('arr_churned')}}, 0)"

    timestamp: date_day
    time_grains: [day, week, month, quarter, year, all_time]

    dimensions:
      - change_category
      - sales_motion

    meta:
      metric_level: 'Company'
      owner(s): 'Andrew Tom'