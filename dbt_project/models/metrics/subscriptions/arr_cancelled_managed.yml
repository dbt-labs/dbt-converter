version: 2

metrics:
  - name: arr_cancelled_managed
    label: Managed Cancelled ARR
    model: ref('fct_arr_aggregated')
    description: >
      The ARR (Annual Recurring Revenue) loss from Managed accounts associated with churn
      transactions (cancels, or switch to free developer plan) over a given time period.
      Includes expected churn.

    calculation_method: sum
    expression: mg_churn_arr

    filters:
      - field: sales_channel
        operator: "="
        value: "'Managed'"

    dimensions:
      - fiscal_quarter
      - fiscal_year

    timestamp: close_month
    time_grains: [month, quarter, year, all_time]

    meta:
      metric_level: 'Company'
      owner(s): 'Paige Berry'
      