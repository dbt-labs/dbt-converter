version: 2

metrics:
  - name: dora_score
    label: DORA Score
    model: ref('fct_github_pull_requests')
    description: '{{ doc("dora_score") }}'
    tags: ['FY2023 - O3']

    calculation_method: count
    expression: pull_request_id

    filters:
      - field: users_engineering_team
        operator: '!='
        value: 'null'

    timestamp: date_day
    time_grains: [day, week, month]

    dimensions:
      - users_engineering_team

    meta:
      okr_level: 'Company'
      owner(s): 'Daniel Le and Tristan Handy'
      team: 'Leadership'