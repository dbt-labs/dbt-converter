version: 2

metrics:
  - name: customer_retention_rate
    label: Customer (Logo) Retention Rate
    description: >
      The ratio of customers retained in a given month.
    tags: ['Company Metric']

    calculation_method: derived
    expression: "{{metric('base__customers_retained')}} / {{metric('customers_month_start')}}"

    timestamp: date_day
    time_grains: [month]

    dimensions:
      - sales_motion
      - geo_region
      - geo_country
      - geo_state
      - account_region
      - account_subregion
      - market_segment
      - deployment_type

    meta:
      metric_level: 'Company'
      owner(s): 'Andrew Tom'