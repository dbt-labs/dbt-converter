version: 2

metrics:
  - name: weekly_active_cloud_accounts
    label: Cumulative Weekly Active Cloud Accounts
    model: ref('fct_customer_health')
    description: >
      'The running total of dbt Cloud accounts with at least one
       successful job run in the last trailing 7 days for any given day.'
    tags: ['Company Metric']

    calculation_method: sum
    expression: t7d_successful_job_active

    timestamp: date_day
    time_grains: [day]

    dimensions:
      - account_region

    meta:
      metric_level: 'Company'
      owner(s): 'Andrew Tom'