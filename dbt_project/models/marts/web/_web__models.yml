version: 2

models:
    - name: dim_web_page_tags
      description: '{{ doc("dim_web_page_tags") }}'
      columns:
          - name: page_id
            tests:
                - unique
                - not_null

    - name: fct_web_attribution
      description: '{{ doc("fct_web_attribution") }}'
      columns:
        - name: attributed_conversion_id
          description: >
            {{ doc("attributed_conversion_id") }}
          tests:
              - unique
              - not_null

        - name: attributed_session_id
          description: >
            {{ doc("attributed_session_id") }}

        - name: event_id
          description: >
            {{ doc("event_id") }}
        
        - name: inferred_user_id
          description: >
            {{ doc("inferred_user_id") }}

        - name: cloud_user_id
          description: The dbt Cloud user ID associated with the person.

        - name: salesforce_contact_id
          description: The Salesforce Contact ID associated with the person.

        - name: session_id
          description: >
            {{ doc("session_id") }}

        - name: source_mapping_id
          description: >
            {{ doc("source_mapping_id") }}

        - name: ad_web_mapping_id
          description: >
            {{ doc("ad_web_mapping_id") }}
        
        - name: first_page_url
          description: The page URL of the first page visited in a session. This is otherwise known as the landing page URL.
          
        - name: first_page_url_host
          description: The URL host of the first page visited in a session. This is otherwise known as the landing page URL host.

        - name: first_page_url_path
          description: The URL path of the first page visited in a session. This is otherwise known as the landing page URL path.

        - name: first_page_url_query
          description: The URL parameters attatched to the first page visited in a session. This is where medium, source, content, and campaign are parsed from.
        
        - name: marketing_source
          description: The company / website where the traffic came from

        - name: marketing_medium
          description: Type of traffic source

        - name: channel
          description: >
            {{ doc("channel") }}
        
        - name: sub_channel
          description: >
            {{ doc("sub_channel") }}
        
        - name: marketing_campaign
          description: The campaign value parsed from utm_campaign in the referring URL query.

        - name: marketing_campaign_name
          description: >
            {{ doc("marketing_campaign_name") }}
        
        - name: marketing_campaign_period
          description: >
            {{ doc("marketing_campaign_period") }}
        
        - name: marketing_campaign_goal
          description: >
            {{ doc("marketing_campaign_goal") }}

        - name: marketing_content
          description: The content value parsed from utm_content in the referring URL query.

        - name: marketing_offer
          description: >
            {{ doc("marketing_offer") }}

        - name: marketing_asset
          description: >
            {{ doc("marketing_asset") }}

        - name: marketing_asset_version
          description: >
            {{ doc("marketing_asset_version") }}

        - name: marketing_term
          description: The term value parsed from utm_term in the referring URL query.

        - name: experiment_name
          description: >
            {{ doc("experiment_name") }}
        
        - name: branch_name
          description: >
            {{ doc("branch_name") }}
        
        - name: conversion_name
          description: >
            {{ doc("conversion_name") }}
          
        - name: conversion_type
          description: >
            {{ doc("conversion_type") }}

        - name: conversion_group
          description: >
            {{ doc("conversion_group") }}

        - name: conversion_index
          description: >
            {{ doc("conversion_index") }}

        - name: conversion_name_index
          description: >
            {{ doc("conversion_name_index") }}

        - name: conversion_group_index
          description: >
            {{ doc("conversion_group_index") }}
          
        - name: total_sessions_in_conversion_window
          description: >
            {{ doc("total_sessions_in_conversion_window") }}
        
        - name: conversion_session_index
          description: >
            {{ doc("conversion_session_index") }}

        - name: is_converting_session
          description: >
            {{ doc("is_converting_session") }}

        - name: is_first_conversion
          description: >
            {{ doc("is_first_conversion") }}
        
        - name: is_first_conversion_of_name
          description: >
            {{ doc("is_first_conversion_of_name") }}

        - name: is_first_conversion_of_group
          description: >
            {{ doc("is_first_conversion_of_group") }}

        - name: days_from_session_to_conversion
          description: >
            {{ doc("days_from_session_to_conversion") }}

        - name: session_start
          description: Timestamp for the start of the session (in UTC).
        
        - name: converted_at
          description: >
            {{ doc("converted_at") }}
          
        - name: forty_twenty_forty_points
          description: >
            {{ doc("forty_twenty_forty_points") }}

        - name: first_touch_points
          description: >
            {{ doc("first_touch_points") }}
        
        - name: last_touch_points
          description: >
            {{ doc("last_touch_points") }}
          
        - name: linear_points
          description: >
            {{ doc("linear_points") }}

        - name: attribution_model
          description: >
            {{ doc("attribution_model") }}
        
        - name: cloud_account_id
          description: >
            The Cloud account ID associated with a user's first ever Cloud signup conversion.
            This is based on the first Cloud account created by that user.

        - name: cloud_account_created_at
          description: A timestamp indicating when the Cloud account was created.
        
        - name: days_from_conversion_to_account_creation
          description: The number of days between a user's first Cloud signup event and when their first Cloud account was created.

    - name: fct_web_attribution_sessions
      description: '{{ doc("fct_web_attribution_sessions") }}'
      columns:
        - name: attributed_session_id
          description: >
            {{ doc("attributed_session_id") }}
          tests:
              - unique
              - not_null

        - name: event_id
          description: >
            {{ doc("event_id") }}
        
        - name: inferred_user_id
          description: >
            {{ doc("inferred_user_id") }}

        - name: cloud_user_id
          description: The dbt Cloud user ID associated with the person.

        - name: salesforce_contact_id
          description: The Salesforce Contact ID associated with the person.

        - name: session_id
          description: >
            {{ doc("session_id") }}

        - name: source_mapping_id
          description: >
            {{ doc("source_mapping_id") }}

        - name: ad_web_mapping_id
          description: >
            {{ doc("ad_web_mapping_id") }}
        
        - name: first_page_url
          description: The page URL of the first page visited in a session. This is otherwise known as the landing page URL.
          
        - name: first_page_url_host
          description: The URL host of the first page visited in a session. This is otherwise known as the landing page URL host.

        - name: first_page_url_path
          description: The URL path of the first page visited in a session. This is otherwise known as the landing page URL path.

        - name: first_page_url_query
          description: The URL parameters attatched to the first page visited in a session. This is where medium, source, content, and campaign are parsed from.
        
        - name: marketing_source
          description: The company / website where the traffic came from

        - name: marketing_medium
          description: Type of traffic source

        - name: channel
          description: >
            {{ doc("channel") }}
        
        - name: sub_channel
          description: >
            {{ doc("sub_channel") }}

        - name: source_type
          description: >
            A high-level grouping, or bucketing, of the session source.
            Source types fall into four specific groups: Demand Generation, Direct Demand, Partner Referred Inbound, and Product Upsell.
            This field is reference from the `source_type` field in the `fct_notion_channel_mapping` model.

        - name: team
          description: >
            The team that is credited for the session.

        - name: channel_grouping
          description: >
            The highest level grouping of the session, as determined by the Channel Mapping dataset.
            Examples include: Inbound Free, Inbound Paid, and Direct.
        
        - name: marketing_campaign
          description: The campaign value parsed from utm_campaign in the referring URL query.

        - name: marketing_campaign_name
          description: >
            {{ doc("marketing_campaign_name") }}
        
        - name: marketing_campaign_period
          description: >
            {{ doc("marketing_campaign_period") }}
        
        - name: marketing_campaign_goal
          description: >
            {{ doc("marketing_campaign_goal") }}

        - name: marketing_content
          description: The content value parsed from utm_content in the referring URL query.

        - name: marketing_offer
          description: >
            {{ doc("marketing_offer") }}

        - name: marketing_asset
          description: >
            {{ doc("marketing_asset") }}

        - name: marketing_asset_version
          description: >
            {{ doc("marketing_asset_version") }}

        - name: marketing_term
          description: The term value parsed from utm_term in the referring URL query.

        - name: experiment_name
          description: >
            {{ doc("experiment_name") }}
        
        - name: branch_name
          description: >
            {{ doc("branch_name") }}
        
        - name: conversion_name
          description: >
            {{ doc("conversion_name") }}
          
        - name: conversion_type
          description: >
            {{ doc("conversion_type") }}

        - name: conversion_group
          description: >
            {{ doc("conversion_group") }}

        - name: conversion_index
          description: >
            {{ doc("conversion_index") }}

        - name: conversion_name_index
          description: >
            {{ doc("conversion_name_index") }}

        - name: conversion_group_index
          description: >
            {{ doc("conversion_group_index") }}
          
        - name: total_sessions_in_conversion_window
          description: >
            {{ doc("total_sessions_in_conversion_window") }}
        
        - name: conversion_session_index
          description: >
            {{ doc("conversion_session_index") }}

        - name: is_converting_session
          description: >
            {{ doc("is_converting_session") }}

        - name: is_first_conversion
          description: >
            {{ doc("is_first_conversion") }}
        
        - name: is_first_conversion_of_name
          description: >
            {{ doc("is_first_conversion_of_name") }}

        - name: is_first_conversion_of_group
          description: >
            {{ doc("is_first_conversion_of_group") }}

        - name: days_from_session_to_conversion
          description: >
            {{ doc("days_from_session_to_conversion") }}

        - name: session_start
          description: Timestamp for the start of the session (in UTC).
        
        - name: converted_at
          description: >
            {{ doc("converted_at") }}
          
        - name: forty_twenty_forty_points
          description: >
            {{ doc("forty_twenty_forty_points") }}

        - name: first_touch_points
          description: >
            {{ doc("first_touch_points") }}
        
        - name: last_touch_points
          description: >
            {{ doc("last_touch_points") }}
          
        - name: linear_points
          description: >
            {{ doc("linear_points") }}
   
    - name: fct_web_conversions
      description: >
        {{ doc("fct_web_conversions") }}

      columns:
        - name: event_id
          description: >
            {{ doc("event_id") }}
          tests:
              - unique
              - not_null

        - name: inferred_user_id
          description: >
            {{ doc("inferred_user_id") }}

        - name: cloud_user_id
          description: The user's dbt Cloud User ID.

        - name: salesforce_contact_id
          description: The user's Salesforce Contact ID.
        
        - name: page_view_id
          description: >
            {{ doc("page_view_id") }}

        - name: session_id
          description: >
            {{ doc("session_id") }}

        - name: conversion_id
          description: >
            {{ doc("conversion_id") }}

        - name: conversion_name
          description: >
            {{ doc("conversion_name") }}

        - name: conversion_type
          description: >
            {{ doc("conversion_type") }}

        - name: conversion_group
          description: >
            {{ doc("conversion_group") }}

        - name: conversion_index
          description: >
            {{ doc("conversion_index") }}
        
        - name: conversion_name_index
          description: >
            {{ doc("conversion_name_index") }}
        
        - name: conversion_group_index
          description: >
            {{ doc("conversion_group_index") }}

        - name: converted_at
          description: >
            {{ doc("converted_at") }}

        - name: unstruct_event
          description: A JSON object that holds all of the details of the converison.

        - name: email
          description: The email address as provider during the conversion, if available.
        

    - name: fct_web_sessions
      description: >
        This model builds off of snowplow_sessions and adds additional
        fields/calculations (e.g. the `user_attempted_signup` boolean field)
      columns:
          - name: session_id
            tests:
                - not_null
                - unique:
                    severity: warn

          - name: inferred_user_id
            description: '{{ doc("inferred_user_id") }}'
                    
          - name: cloud_user_id
            description: The user's dbt Cloud User ID.

          - name: salesforce_contact_id
            description: The user's Salesforce Contact ID.

          - name: source_mapping_id
            description: '{{ doc("source_mapping_id") }}'
          
          - name: exit_page_url
            description: The last page URL
                
          - name: session_cookie_index
             
          - name: user_snowplow_domain_id
            description: User ID set by Snowplow using 1st party cookie
             
          - name: user_snowplow_crossdomain_id
            description: User ID set by Snowplow using 3rd party cookie
             
          - name: session_index
            description: A visit / session index
             
          - name: session_start
            description: Timestamp for the start of the session on your preferred clock
             
          - name: session_end
            description: Timestamp for the end of the session on your preferred clock
             
          - name: session_start_local
            description: Timestamp for the start of the session on the user's clock
             
          - name: session_end_local
            description: Timestamp for the end of the session on the user's clock
             
          - name: page_views
            description: Number of page views within this session
             
          - name: time_engaged_in_s
            description: Time spent by the user on this visit
             
          - name: time_engaged_in_s_tier
            description: Range of time spent by the user on this visit
             
          - name: user_bounced
            description: Did the user bounce on their first page view in this session?
             
          - name: first_page_url
            description: The page URL
             
          - name: first_page_url_scheme
            description: Scheme aka protocol
             
          - name: first_page_url_host
            description: Host aka domain
             
          - name: first_page_url_port
            description: Port if specified, 80 if not
             
          - name: first_page_url_path
            description: Path to page
             
          - name: first_page_url_query
            description: Querystring
             
          - name: first_page_url_fragment
            description: Fragment aka anchor
             
          - name: first_page_title
            description: Web page title
             
          - name: referer_url
            description: The referer URL
             
          - name: referer_url_scheme
            description: Referer scheme
             
          - name: referer_url_host
            description: Referer host
             
          - name: referer_url_port
            description: Referer port
             
          - name: referer_url_path
            description: Referer page path
             
          - name: referer_url_query
            description: Referer URL querystring
             
          - name: referer_url_fragment
            description: Referer URL fragment
             
          - name: referer_medium
            description: Type of referer
             
          - name: referer_source
            description: Name of referer if recognised
             
          - name: referer_term
            description: Keywords if source is a search engine
            
          - name: marketing_medium
            description: Type of traffic source
            
          - name: marketing_source
            description: The company / website where the traffic came from
            
          - name: marketing_term
            description: Any keywords associated with the referer
            
          - name: marketing_content
            description: The content of the ad. (Or an ID so that it can be looked up.)
            
          - name: marketing_campaign
            description: The campaign ID
            
          - name: marketing_click_id
            description: The click ID
            
          - name: marketing_network
            description: The ad network to which the click ID belongs

          - name: channel
            description: '{{ doc("channel") }}'       
          
          - name: sub_channel
            description: '{{ doc("sub_channel") }}'

          - name: source_type
            description: >
              A high-level grouping, or bucketing, of the session source.
              Source types fall into four specific groups: Demand Generation, Direct Demand, Partner Referred Inbound, and Product Upsell.
              This field is reference from the `source_type` field in the `fct_notion_channel_mapping` model.

          - name: team
            description: >
              The team that is credited for the session.

          - name: channel_grouping
            description: >
              The highest level grouping of the session, as determined by the Channel Mapping dataset.
              Examples include: Inbound Free, Inbound Paid, and Direct.
            
          - name: geo_country
            description: ISO 3166-1 code for the country the visitor is located in
            
          - name: geo_region
            description: ISO-3166-2 code for country region the visitor is in
            
          - name: geo_region_name
            description: Visitor region name
            
          - name: geo_city
            description: City the visitor is in
            
          - name: geo_zipcode
            description: Postcode the visitor is in
            
          - name: geo_latitude
            description: Visitor location latitude
            
          - name: geo_longitude
            description: Visitor location longitude
            
          - name: geo_timezone
            description: Visitor timezone name
            
          - name: ip_address
            description: The IP address of the visitor
            
          - name: ip_isp
            description: Visitor's ISP
            
          - name: ip_organization
            description: Organization associated with the visitor's IP address - defaults to ISP name if none is found
            
          - name: ip_domain
            description: Second level domain name associated with the visitor's IP address
            
          - name: ip_net_speed
            description: Visitor's connection type
            
          - name: browser
            description: The name and version of the visitor's browser
            
          - name: browser_name
            description: The name, or family, of the visitor's browser
            
          - name: browser_major_version
            description: Browser major version
            
          - name: browser_minor_version
            description: Browser minor version
            
          - name: browser_build_version
            description: Browser build version
            
          - name: browser_engine
            description: Browser rendering engine
            
          - name: browser_language
            description: Language the browser is set to
            
          - name: os
            description: The name and version of the visitor's OS
            
          - name: os_name
            description: The name of the visitor's OS
            
          - name: os_major_version
            description: OS major version
            
          - name: os_minor_version
            description: OS minor version
            
          - name: os_build_version
            description: OS build version
            
          - name: os_manufacturer
            description: OS manufacturer
            
          - name: os_timezone
            description: Time zone the OS is set to
            
          - name: device
            description: Device model
            
          - name: device_type
            description: Type of device
            
          - name: device_is_mobile
            description: Is the device mobile?                       
            
          - name: app_id
            description: Application ID
          
          - name: user_attempted_signup
            description: A boolean field indicating if the user attempted to sign up for dbt Cloud in that particular session.
          
          - name: region_category
            description: >
              The region the session originated from.
              This is based on our country to region mapping found in `stg_seed__country_to_region`.

          - name: marketing_campaign_period
            description: >
              {{ doc("marketing_campaign_period") }}

          - name: marketing_campaign_name
            description: >
              {{ doc("marketing_campaign_name") }}    
             
          - name: marketing_campaign_goal
            description: >
              {{ doc("marketing_campaign_goal") }}
                          
          - name: marketing_offer
            description: >
              {{ doc("marketing_offer") }} 
            
          - name: marketing_asset
            description: >
              {{ doc("marketing_asset") }}
          
          - name: marketing_asset_version
            description: >
              {{ doc("marketing_asset_version") }}

          - name: experiment_name
            description: >
              {{ doc("experiment_name") }}
        
          - name: branch_name
            description: >
              {{ doc("branch_name") }}
          
          - name: marketing_campaign_with_spaces
            description: >
              This is a copy of the `marketing_campaign` field, but with certain characters URL decoded.
              For example, `%20` is converted to a space.
              This enables us to map UTM campaign names to campaign names from the advertising platforms.

          - name: signup_activity_loaded_at
            description: >
              {{ doc("_loaded_at") }}

          - name: sales_territory
            description: >
              The name of the sales territory the session occured in.
              Examples include: South Atlantic, San Francisco, and ANZ North.

          - name: is_internal_user
            description: '{{ doc("is_internal_user") }}'
           
    - name: fct_web_pageviews
      description: >
        This model builds off of snowplow_page_views and adds additional
        fields/calculations (e.g. the `cloud_page_type` field). For performance
        timing information, see [this Snowplow post](https://discourse.snowplowanalytics.com/t/measuring-page-load-times-with-the-performance-timing-context-tutorial/100)
      columns:
          - name: page_view_id
            tests:
                - unique
                - not_null

          - name: inferred_user_id
            description: '{{ doc("inferred_user_id") }}'
                    
          - name: cloud_user_id
            description: The user's dbt Cloud User ID.

          - name: salesforce_contact_id
            description: The user's Salesforce Contact ID.

          - name: cloud_account_id
            description: The Account ID determined from the URL for this page view (Cloud only)

          - name: cloud_project_id
            description: The Project ID determined from the URL for this page view (Cloud only)

          - name: source_mapping_id
            description: '{{ doc("source_mapping_id") }}'

          - name: cloud_page_type
            description: >
              A categorization of different page types within dbt Cloud.
              Will be "uncategorized" for pages outside of dbt Cloud.
            tests:
                - accepted_values:
                    values:
                     - accept invite
                     - account settings
                     - home
                     - ide
                     - login
                     - no account error
                     - onboarding
                     - profile
                     - reset password
                     - scheduled run
                     - signup
                     - verify email
                     - uncategorized

          - name: redirect_time_in_ms
            description: >
              Step 0: Reports on the time taken to redirect the user to a new page.
              This value will be "0" if the pageview is not a redirect. Calculated
              as the difference between `redirect_end` and `redirect_start`.

          - name: unload_time_in_ms
            description: >
              Step 1: Reports on the time taken to unload the previous page.
              Calculated as the difference between `unload_event_end` and
              `unload_event_start`.

          - name: app_cache_time_in_ms
            description: >
              Step 2: Reports on the time taken to load a webpage from a browser cache.
              This value will be "0" if the requested resource is not cached. Calculated
              as the difference between `domain_lookup_start` and `fetch_start`.

          - name: dns_time_in_ms
            description: >
              Step 3: Reports on the time taken to look up a resource from DNS. Calculated
              as the difference between `domain_lookup_end` and `domain_lookup_start`.

          - name: tcp_time_in_ms
            description: >
              Step 4: Reports on the time taken to establish a TCP connection with the remote
              server. Calculated as the difference between `connect_end` and `connect_start`.

          - name: request_time_in_ms
            description: >
              Step 5: Reports on the time taken to request and retrieve a response from
              the server. This metric is inclusive of _both_ the request time and the
              response time. Calculated as the difference between `response_start` and
              `request_start`.

          - name: response_time_in_ms
            description: >
              Step 5b: Reports on the time taken to retrieve a response from the server.
              This metric _only_ includes timing information for receiving a response, and
              does not include the time taken to initiate a request. Calculated as the
              difference between `response_end` and `response_start`.

          - name: dom_loading_to_interactive_time_in_ms
            description: >
              Step 6a: Reports on the time between when the DOM begins loading and when it
              becomes interactive. Calculated as the difference between `dom_interactive`
              and `dom_loading`.

          - name: dom_interactive_to_complete_time_in_ms
            description: >
              Step 6b: Reports on the time between when the DOM becomes interactive and when
              the DOM is rendered. Calculated as the difference between `dom_complete`
              and `dom_interactive`.

          - name: processing_time_in_ms
            description: >
              Step 6c: Reports on the time taken to load the DOM in its entirety. This metric
              is inclusive of steps 6a and 6b. Calculated as the difference between
              `dom_complete` and `dom_loading`.

          - name: onload_time_in_ms
            description: >
              Step 7: Reports on the time taken to render the web page. Calculated as the 
              difference between `load_event_end` and `load_event_start`.

          - name: total_time_in_ms
            description: >
              Total: Reports on the total time taken to load the web page, from navigating
              to the page all the way through the page being completely loaded. Calculated
              as the difference between `load_event_end` and `navigation_start`.

          - name: marketing_campaign_period
            description: >
              {{ doc("marketing_campaign_period") }}

          - name: marketing_campaign_name
            description: >
              {{ doc("marketing_campaign_name") }}    
             
          - name: marketing_campaign_goal
            description: >
              {{ doc("marketing_campaign_goal") }}
                          
          - name: marketing_offer
            description: >
              {{ doc("marketing_offer") }} 
            
          - name: marketing_asset
            description: >
              {{ doc("marketing_asset") }}
          
          - name: marketing_asset_version
            description: >
              {{ doc("marketing_asset_version") }}

          - name: channel
            description: '{{ doc("channel") }}'       
            
          - name: sub_channel
            description: '{{ doc("sub_channel") }}'

          - name: source_type
            description: >
              A high-level grouping, or bucketing, of the session source.
              Source types fall into four specific groups: Demand Generation, Direct Demand, Partner Referred Inbound, and Product Upsell.
              This field is reference from the `source_type` field in the `fct_notion_channel_mapping` model.

          - name: team
            description: >
              The team that is credited for the session.

          - name: channel_grouping
            description: >
              The highest level grouping of the session, as determined by the Channel Mapping dataset.
              Examples include: Inbound Free, Inbound Paid, and Direct.

          - name: experiment_name
            description: >
              {{ doc("experiment_name") }}
          
          - name: branch_name
            description: >
              {{ doc("branch_name") }}
            
          - name: user_snowplow_domain_id
            description: User ID set by Snowplow using 1st party cookie
            tests:
                - not_null
                
          - name: user_snowplow_crossdomain_id
            description: User ID set by Snowplow using 3rd party cookie
            
          - name: session_id
            description: A visit / session identifier
            tests:
                - not_null
                    
          - name: min_tstamp
                    
          - name: max_tstamp
                    
          - name: max_session_page_view_index
                    
          - name: last_page_view_in_session
            
          - name: session_cookie_index
            description: A visit / session index
            tests:
                - not_null
                
          - name: page_view_index
            description: A page view index
            
          - name: page_view_in_session_index
            description: A page view index within a single session
            
          - name: page_view_start
            description: Timestamp for the start of the page view on your preferred clock
            
          - name: page_view_end
            description: Timestamp for the end of the page view on your preferred clock
            
          - name: page_view_start_local
            description: Timestamp for the start of the page view on the user's clock
            
          - name: page_view_end_local
            description: Timestamp for the end of the page view on the user's clock
            
          - name: time_engaged_in_s
            description: Time spent by the user on the page
            
          - name: time_engaged_in_s_tier
            description: Range of time spent by the user on the page
            
          - name: horizontal_pixels_scrolled
            description: Distance the user scrolled horizontally in pixels
            
          - name: vertical_pixels_scrolled
            description: Distance the user scrolled vertically in pixels
            
          - name: horizontal_percentage_scrolled
            description: Percentage of page scrolled horizontally
            
          - name: vertical_percentage_scrolled
            description: Percentage of page scrolled vertically
            
          - name: vertical_percentage_scrolled_tier
            description: Range of percentage of page scrolled vertically
            
          - name: user_engaged
            description: Did the user engage with the page?
            
          - name: page_url
            description: The page URL
            
          - name: page_url_scheme
            description: Scheme aka protocol
            
          - name: page_url_host
            description: Host aka domain
            
          - name: page_url_port
            description: Port if specified, 80 if not
            
          - name: page_url_path
            description: Path to page
            
          - name: page_url_query
            description: Querystring
            
          - name: page_url_fragment
            description: Fragment aka anchor
            
          - name: page_title
            description: Web page title
            
          - name: page_width
            description: The page's width in pixels
            
          - name: page_height
            description: The page's height in pixels
            
          - name: referer_url
            description: The referer URL
            
          - name: referer_url_scheme
            description: Referer scheme
            
          - name: referer_url_host
            description: Referer host
            
          - name: referer_url_port
            description: Referer port
            
          - name: referer_url_path
            description: Referer page path
            
          - name: referer_url_query
            description: Referer URL querystring
            
          - name: referer_url_fragment
            description: Referer URL fragment
            
          - name: referer_medium
            description: Type of referer
            
          - name: referer_source
            description: Name of referer if recognised
            
          - name: referer_term
            description: Keywords if source is a search engine
            
          - name: marketing_medium
            description: Type of traffic source
            
          - name: marketing_source
            description: The company / website where the traffic came from
            
          - name: marketing_term
            description: Any keywords associated with the referer
            
          - name: marketing_content
            description: The content of the ad. (Or an ID so that it can be looked up.)
            
          - name: marketing_campaign
            description: The campaign ID
            
          - name: marketing_click_id
            description: The click ID
            
          - name: marketing_network
            description: The ad network to which the click ID belongs
            
          - name: geo_country
            description: ISO 3166-1 code for the country the visitor is located in
            
          - name: geo_region
            description: ISO-3166-2 code for country region the visitor is in
            
          - name: geo_region_name
            description: Visitor region name
            
          - name: geo_city
            description: City the visitor is in
            
          - name: geo_zipcode
            description: Postcode the visitor is in
            
          - name: geo_latitude
            description: Visitor location latitude
            
          - name: geo_longitude
            description: Visitor location longitude
            
          - name: geo_timezone
            description: Visitor timezone name
            
          - name: ip_address
            description: The IP address of the visitor
            
          - name: ip_isp
            description: Visitor's ISP
            
          - name: ip_organization
            description: Organization associated with the visitor's IP address - defaults to ISP name if none is found
            
          - name: ip_domain
            description: Second level domain name associated with the visitor's IP address
            
          - name: ip_net_speed
            description: Visitor's connection type
            
          - name: browser
            description: The name and version of the visitor's browser
            
          - name: browser_name
            description: The name, or family, of the visitor's browser
            
          - name: browser_major_version
            description: Browser major version
            
          - name: browser_minor_version
            description: Browser minor version
            
          - name: browser_build_version
            description: Browser build version
            
          - name: browser_engine
            description: Browser rendering engine
            
          - name: browser_window_width
            description: Viewport width
            
          - name: browser_window_height
            description: Viewport height
            
          - name: browser_language
            description: Language the browser is set to
            
          - name: os
            description: The name and version of the visitor's OS
            
          - name: os_name
            description: The name of the visitor's OS
            
          - name: os_major_version
            description: OS major version
            
          - name: os_minor_version
            description: OS minor version
            
          - name: os_build_version
            description: OS build version
            
          - name: os_manufacturer
            description: OS manufacturer
            
          - name: os_timezone
            description: Time zone the OS is set to
            
          - name: device
            description: Device model
            
          - name: device_type
            description: Type of device
            
          - name: device_is_mobile
            description: Is the device mobile?
            
          - name: app_id
            description: Application ID

          - name: is_internal_user
            description: '{{ doc("is_internal_user") }}'


    - name: snowplow_id_mappings
      description: '{{ doc("snowplow_id_mappings") }}'
      columns:
        - name: inferred_user_id
          description: '{{ doc("inferred_user_id") }}'
          tests:
            - not_null
              
        - name: domain_userid
          description: User ID set by Snowplow using 1st party cookie
        
        - name: cloud_user_id
          description: >
            The users's dbt Cloud user ID.
            This is identified if a user logs into dbt Cloud.
            This is also supplemented by form submit information - if a form fill email matches a dbt Cloud user ID then this is populated.

        - name: salesforce_contact_id
          description: >
            The person's Salesforce Contact ID.
            This is based on either the user's dbt Cloud user ID (as identified via login) or via a form submit process with an email address.
        
        - name: email
          description: >
            The email address either associated with the dbt Cloud user, or the email address used during a form submit event.

        - name: is_internal_user
          description: '{{ doc("is_internal_user") }}'

        - name: max_tstamp
          description: Timestamp that this `cloud_user_id` and `email` was most recently seen on this `domain_userid`.
        
        - name: idx
          description: Used for dedupliation; not for use in analysis.
      
