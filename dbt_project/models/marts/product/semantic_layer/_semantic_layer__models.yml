version: 2

models:
  - name: fct_semantic_layer_queries
    description: >
      All queries against the semantic layer, including those that do not use dbt-sql.
      Note: a query must use compiled dbt-sql to be considered an active use of the
      semantic layer
    columns:
      - name: event_id
        description: "The id of the snowplow event captured."

      - name: account_id
        description: >
          The hashed id of the dbt Cloud account associated with the query, normalized 
          across instances.

      - name: tenant_account_id
        description: >
          For single tenant & EMEA instances, this is the native account ID in that
          specific database (e.g. for each single tenant instance, the first account 
          ID will be 1).

      - name: compile_start
        description: "The timestamp at which query compilation began."

      - name: compile_end
        description: "The timestamp at which query compilation ended."

      - name: compile_request_id
        description: "The unique identifier of the request for compilation."

      - name: custom_subdomain
        description: >
          The portion of the url that users enter into the integration partners UI 
          to allow dbt to proxy their compile requests.

      - name: environment_id
        description: >
          The hashed id of the dbt Cloud environment associated with the query, 
          normalized across instances.

      - name: tenant_environment_id
        description: >
          For single tenant & EMEA instances, this is the native environment ID in 
          that specific database (e.g. for each single tenant instance, the first 
          account ID will be 1).

      - name: hostname
        description: >
          The url a user would enter into the integration partner UI so that dbt
          can proxy the compile requests.

      - name: is_compilation_successful
        description: "A boolean indicator as to whether the query code compiled."

      - name: query_type
        description: "The type of SQL run against the semantic layer."
      
      - name: is_active_semantic_layer_usage
        description: >
          A boolean indicating whether a given query should represent usage of the
          semantic layer product, specifically whether the query was written in
          dbt sql. 

      - name: warehouse_account_id
        description: >
          The identifier of the data warehouse account associated with the query. 
          
      - name: _loaded_at
        description: >
          {{ doc("_loaded_at") }}


