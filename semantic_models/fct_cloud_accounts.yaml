name: fct_cloud_accounts
description: "Address data is pulled from Stripe (if available) then Salesforce (if
  available). Cloud accounts that never were signed up via Stripe (i.e., on a Team
  plan), will never have data from Stripe.\n"
sql_table: ANALYTICS.dbt_jstein.fct_cloud_accounts
dbt_model: ANALYTICS.dbt_jstein.fct_cloud_accounts
measures:
- name: accounts_first_ide_session
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_used_ide_at
- name: accounts_first_repo_connected
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_repo_created_at
- name: accounts_time_to_first_ide_success
  agg: average
  expr: DATEDIFF(DAYS, created_at, first_successful_ide_invocation_at)
  agg_time_dimension: created_at
- name: new_verified_accounts_activated
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: cloud_activation_due_at
- name: accounts_cohort_ide_success
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: created_at
- name: accounts_time_to_first_job_success
  agg: average
  expr: DATEDIFF(DAYS, created_at, first_successful_run_at)
  agg_time_dimension: created_at
- name: accounts_cohorted
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: created_at
- name: semantic_layer_enabled_accounts
  agg: count_distinct
  expr: account_id
  agg_time_dimension: last_successful_run_at
- name: accounts_first_job_run_success
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_successful_run_at
- name: accounts_first_job_created
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_job_created_at
- name: accounts_first_warehouse_connected
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_connection_created_at
- name: accounts_first_ide_success
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_successful_ide_invocation_at
- name: accounts_cohort_job_success
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: created_at
- name: accounts_first_paid
  agg: sum
  expr: CASE WHEN account_id IS NOT NULL THEN 1 ELSE 0 END
  agg_time_dimension: first_paid_at
dimensions:
- name: first_successful_ide_invocation_at
  type: time
  type_params:
    time_granularity: day
- name: name
  type: categorical
- name: cloud_activation_due_at
  type: time
  type_params:
    time_granularity: day
- name: last_successful_run_at
  type: time
  type_params:
    time_granularity: day
- name: first_cloud_activated_at
  type: categorical
- name: plan
  type: categorical
- name: database_type
  type: categorical
- name: is_primary_cloud_account
  type: categorical
- name: is_partner_training_acct
  type: categorical
- name: account_id
  type: categorical
- name: has_successful_semantic_layer_run
  type: categorical
- name: created_at
  type: time
  type_params:
    is_primary: true
    time_granularity: day
- name: first_used_ide_at
  type: time
  type_params:
    time_granularity: day
- name: first_successful_run_at
  type: time
  type_params:
    time_granularity: day
- name: first_paid_at
  type: time
  type_params:
    time_granularity: day
- name: first_connection_created_at
  type: time
  type_params:
    time_granularity: day
- name: first_job_created_at
  type: time
  type_params:
    time_granularity: day
- name: has_metrics
  type: categorical
- name: last_metadata_api_request_at
  type: categorical
- name: first_repo_created_at
  type: time
  type_params:
    time_granularity: day
- name: is_account_deleted
  type: categorical
- name: is_test_account
  type: categorical
