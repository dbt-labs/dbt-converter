{"name": "fct_customer_activity_managed_quarterly_types", "description": "'**Managed Customer Activity Movement**: Counts of `customer_id` field \non `fct_opportunities` ([dbt docs link](https://cloud.getdbt.com/accounts/1/jobs/940/docs/#!/model/model.fishtown_internal_analytics.fct_opportunities)) \nfor all closed won (or lost, for Renew), or currently open opportunities. `expected_arr_delta` is also used to identify customer movements.\n\n**Managed Customer Activity Movement** is identified based on the `close_month` date of the related opportunity record.\nThis differs from the way Managed ARR is calculated, which uses the `contract_start_date` for all non-Land opportunities.\nThis means, for eample, a customer can be counted as an \"Expand\" customer in a different month \nthan their ARR is counted amongst \"Expand\" ARR totals.\n\nThis model contains 1 row per month, per customer, per customer activity type, and only includes Managed customers. \nThe `customer_activity_type` field describes the customer's activity categorization for the month.\n\n#### Activity aka Movement Categories:\n- **Land** - Customer is Net New to dbt Cloud, or moved from Self-Serve to Managed Plan\n- **Expand** - Customer has a Closed Won Renew or Expand Opportunity where the expected Delta ARR is positive (> 0), \nmeaning they are paying more than they were before\n- **Renew** - Customer has a Closed Won Renew or Expand Opportunity where the expected Delta ARR is zero (= 0), \nmeaning they are paying the same as they were before\n- **Churn** - Customer has a Closed Lost Renew Opportunity\n- **Downsell** - Customer has a Closed Won Renew Opportunity where the expected Delta ARR is negative (< 0), \nmeaning they are paying less than they were before\n- **Expected Churn** - Customer has an open Renew Opportunity that has a probability of zero, meaning they are expected to churn\n- **Expected Downsell** - Customer has an open Renew Opportunity that has a positive probability (> 0), \nand the expected Delta ARR is negative (< 0), meaning they are likely to renew and to pay us less than before\n- **Up for Expansion** - Customer has an open Expand opportunity that has a positive probability (> 0), \nand the expected Delta ARR is positive or zero (>= 0), meaning they may expand and are likely to pay us more than or the same as before\n- **Up for Renewal** - Customer has an open Renew opportunity that has a positive probability (> 0), \nand the expected Delta ARR is positive or zero (>= 0), meaning they may renew and are likely to pay us more than or the same as before\n- **Open Pipeline** - Customer has an open Land opportunity that has a positive probability (> 0), \nmeaning they may become a Managed customer/move from Self-Serve to Managed' '**Managed Customer Activity Movement by Quarter** is based on a hierarchical calculation:\n\n- If a customer has an upsell / downsell opportunity and neither a cancel (aka churn) or land opportunity in the quarter, \nlook at their net change in ARR for all opportunities in the quarter to determine where to bucket them \n(if < 0: downsell; if => 0: upsell) \n\n#### In order of precedence of the type:\n- Land and/or Churn\n- Expand & Downsell\n- Renew\n- Expected Churn\n- Expected Downsell / Up for Expansion \n- Up for Renewal\n- Open Pipeline\n\n#### In practice, the logic should be:\n- **Land and/or Churn**: include either, or both, records and exclude any others for this customer\n- **Expand & Downsell**: based on sum of arr delta\n- **Expand & anything below**: Expand\n- **Downsell & anything below**: Downsell\n- **Renew & anything below**: Renew\n- **Expected Churn & anything below**: Epected Churn\n- **Expected Downsell / Up for Expansion (& anything below)**: based on sum of arr delta (< 0 downsell; >= 0 expansion)\n- **Up for Renewal and anything below**: Up for Renewal\n- **Open Pipeline**: itself'", "sql_table": "ANALYTICS.dbt_jstein.fct_customer_activity_managed_quarterly_types", "dbt_model": "ANALYTICS.dbt_jstein.fct_customer_activity_managed_quarterly_types", "measures": [{"name": "customers_up_for_renewal_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_year"}, {"name": "customers_churned_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_expected_churn_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_renewed_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_expansion_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_land_plus_ss_upgrade_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_expected_downsell_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_up_for_expansion_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_downsell_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}, {"name": "customers_open_pipeline_managed", "agg": "count_distinct", "expr": "customer_id", "agg_time_dimension": "fiscal_quarter"}], "dimensions": [{"name": "sales_channel", "type": "categorical"}, {"name": "fiscal_year", "type": "time", "type_params": {"time_granularity": "day"}}, {"name": "customer_activity_type", "type": "categorical"}, {"name": "fiscal_quarter", "type": "time", "type_params": {"is_primary": true, "time_granularity": "day"}}]}